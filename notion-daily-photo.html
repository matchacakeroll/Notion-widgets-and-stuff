<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Daily Photo</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #fafafa;
      margin: 0;
      padding: 12px;
      text-align: center;
    }
    img {
      max-width: 100%;
      max-height: 300px;
      border-radius: 12px;
      object-fit: contain;
    }
    button, input {
      margin-top: 8px;
    }
    button {
      padding: 6px 12px;
      border-radius: 8px;
      border: none;
      background: #222;
      color: white;
      cursor: pointer;
    }
    button:hover {
      opacity: 0.85;
    }
  </style>
</head>
<body>

  <h3>ðŸ“¸ Daily Photo</h3>
  <img id="photo" alt="Upload photos to begin" />
  <br />

  <input type="file" accept="image/*" multiple id="upload" />
  <br />
  <button onclick="nextPhoto()">Next</button>

  <script>
    const STORAGE_KEY = "daily_photos";

    function loadPhotos() {
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    }

    function savePhotos(photos) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(photos));
    }

    function showDailyPhoto() {
      const photos = loadPhotos();
      if (photos.length === 0) return;

      const today = new Date().toDateString();
      const index = Math.abs(
        [...today].reduce((a, c) => a + c.charCodeAt(0), 0)
      ) % photos.length;

      document.getElementById("photo").src = photos[index];
    }

    function nextPhoto() {
      const photos = loadPhotos();
      if (photos.length === 0) return;

      const img = document.getElementById("photo");
      const currentIndex = photos.indexOf(img.src);
      const nextIndex = (currentIndex + 1) % photos.length;
      img.src = photos[nextIndex];
    }

    document.getElementById("upload").addEventListener("change", (event) => {
      const files = event.target.files;
      const photos = loadPhotos();

      for (const file of files) {
        const reader = new FileReader();
        reader.onload = () => {
          photos.push(reader.result);
          savePhotos(photos);
          showDailyPhoto();
        };
        reader.readAsDataURL(file);
      }
    });

    showDailyPhoto();
  </script>

</body>
</html>
